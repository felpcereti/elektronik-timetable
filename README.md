# elektronik-timetable - a modern school timetable frontend
- Displays data based on static table-style web pages generated by [VULCAN Optivum](https://www.vulcan.edu.pl/programy/plan-lekcji-optivum-23)
- Crafted for [ZespÃ³Å‚ SzkÃ³Å‚ Elektronicznych w Rzeszowie](https://www.elektronik.rzeszow.pl/) technical high school from Rzeszow, Poland
- Mobile-first design made to match the school's website one
- Can run for many other Optivum-based school timetables too!
- Data scraping & parsing via [@wulkanowy/timetable-parser-js](https://github.com/wulkanowy/timetable-parser-js)
- Technologies: React, Next.js, TypeScript, Tailwind CSS

# Preparing the timetable to use with the app

ðŸ‘‰ A timetable base URL is a one that points to a folder in the server containing the timetable list - a "lista.html" file.
## Method 2 - original website and CORS Anywhere proxy
In this method we're going to use the original timetable hosted on your school's website.

To get it working, you need to deploy a CORS Anywhere instance as timetable fetching won't work without it due to CORS issues. Optivum's CORS Policy can't be altered, but don't worry, there are no sensitive data passing through, it's just a timetable ðŸ˜…. However if security is your #1 priority use method 2.

Before deploying your instance, set `requireHeader` in its config file to `[]`.

Check out if CORS Anywhere works by proxying your school's timetable base URL like so: `http://<cors_anywhere_url>/https://www.elektronik.rzeszow.pl/plan-lekcji-2`.

You should see two frames with "Not Found" errors. That's okay.

If there are problems with SSL, add `process.env['NODE_TLS_REJECT_UNAUTHORIZED'] = '0';` to the top of the config file and restart the instance.

## Method 3 - clone and self-serve on an external server
You can also clone the whole timetable and host it on your own server.

This way you won't have to worry about CORS Anywhere proxying and related issues, provided if you set up proper CORS handling.

However, you'll lose any automatic updates of the timetable. Be sure to check the original website frequently for any updates.

To clone the website, run `wget -mpEk <timetable_base_url> --no-check-certificate`

Example: `wget -mpEk https://www.elektronik.rzeszow.pl/plan-lekcji-2 --no-check-certificate`

This way is also faster.

## Method 4 - clone and self-serve in this app
What about hosting it inside the app itself?

Simply use the power of Next.js and copy the cloned data to the /public folder!

Follow the method 2, but paste the timetable files to a subfolder in /public folder in the app. The timetable base URL would be `<app_url>/<subfolder_name>`. If you need to commit to deploy, make sure to fork this repo first!

# Getting started
After cloning the repo, define the environment variables (.env):

`NEXT_PUBLIC_PROXY_URL` - CORS Anywhere proxy URL - method 1 only

`NEXT_PUBLIC_TIMETABLE_BASE_URL` - timetable base URL: original URL for method 2, self-hosted URL for method 3 and 4

Example:
```
NEXT_PUBLIC_PROXY_URL=http://localhost:8080
NEXT_PUBLIC_TIMETABLE_BASE_URL=https://www.elektronik.rzeszow.pl/plan-lekcji
```

Then you can install the packages & run the app:
```bash
yarn
yarn dev
```
